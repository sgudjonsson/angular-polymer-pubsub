<!DOCTYPE html>
<html>
    <head>
        <title>Angular + Polymer + PubSub</title>
        <meta charset="utf-8" />

        <link href="/vendors/semantic-ui/build/packaged/css/semantic.min.css" rel="stylesheet" type="text/css" />
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css" />
        <link href="/css/common.css" rel="stylesheet" type="text/css" />
        
        <!-- Third party libraries -->
        <script src="/vendors/angular/angular.min.js"></script>
        <script src="/vendors/platform/platform.js"></script>
        <script src="/vendors/pubsub-js/src/pubsub.js"></script>

        <!-- Angular app -->
        <script src="/app/main.js"></script>

        <!-- Polymer components -->
        <link href="/components/login.html" rel="import" />

    </head>
    <body>
        <div class="ui three column grid">
            <div class="column"></div>
            <div class="six wide column">
                <div class="ui form segment" ng-app="app" ng-controller="AppController">
                    <h3>Angular says...</h3>
                    <a class="ui green label" ng-show="isAuthenticated" ng-click="toggleAuthenticated()">User is authenticated</a>
                    <a class="ui black label" ng-show="!isAuthenticated" ng-click="toggleAuthenticated()">User is not authenticated</a>
                </div>
                <x-login></x-login>
                <div class="ui form segment">
                    <h3>The page says ...</h3>
                    <pre id="log"></pre>
                    <script>
                        PubSub.subscribe('user-authenticated', function(msg, data) {
                            var log = document.querySelector("#log");
                            log.innerHTML = log.innerHTML + "\r\nisAuthenticated = "+ data.isAuthenticated;
                        });
                    </script>
                </div>
            </div>
            <div class="column"></div>
        </div>
    </body>
</html>